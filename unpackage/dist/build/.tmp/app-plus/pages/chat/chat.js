(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/chat/chat"],{"85b4":function(e,t,i){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=c(i("32ff")),a=c(i("1e1e")),o=c(i("b4ab")),r=i("549e");function c(e){return e&&e.__esModule?e:{default:e}}var u=function(){return Promise.all([i.e("common/vendor"),i.e("components/chat-message/chat-message")]).then(i.bind(null,"cd93"))},h=function(){return i.e("components/uni-popup/uni-popup").then(i.bind(null,"ed41"))},d={components:{chatMessage:u,uniPopup:h},mixins:[a.default,s.default,o.default],data:function(){return{scrollAnimation:!1,scrollTop:0,scrollToView:"",emojiList:r.EmojiList,popupLayerClass:"",hideMore:!0,hideEmoji:!0,showPopup:!1,popupMessage:"",textMsg:"",cursor:0,receive_id:0}},computed:{receive_user_info:function(){return this.$store.state.chat.private_user_info},privateMassagerList:function(){if(!this.receive_id)return[];var e="chat_new_"+this.receive_id,t=this.$store.state.chat.privateMassagerObject[e]||[];return t.map(function(e){var t=e.time;if("string"===typeof t||!e)return e;var i=new Date(t);return e.time=i.getMonth()+1+"月"+i.getDate()+"日"+i.getHours()+":"+i.getMinutes(),e})}},watch:{privateMassagerList:function(){var e=this;this.$nextTick(function(){e.scrollToView="message"+(e.privateMassagerList.length-1)})}},onUnload:function(){},onShow:function(){this.initOnShow()},onBackPress:function(){this.$store.commit("cancelMassagerTips",this.receive_id)},methods:{initOnShow:function(){0===this.receive_id&&(this.receive_id=this.$store.state.chat.private_id),this.receive_id?(this.receive_user_info.nickname&&e.setNavigationBarTitle({title:"与"+this.receive_user_info.nickname+"的对话"}),this.$store.commit("cancelMassagerTips",this.receive_id),this.getPrivateChat()):e.reLaunch({url:"/pages/chat/contact"})},openDrawer:function(){this.popupLayerClass="showLayer",this.hideMore=!0},hideDrawer:function(){var e=this;this.popupLayerClass="",setTimeout(function(){e.hideMore=!0,e.hideEmoji=!0},150)},loadHistory:function(){},switchVoice:function(){this.isVoice=!this.isVoice},showMore:function(){this.hideMore=!1,this.popupLayerClass="showLayer"},textareaBlurEvent:function(e){this.textMsg=e.detail.value,this.cursor=e.detail.cursor||0},chooseImage:function(){this.sendImage("album")},camera:function(){this.sendImage("camera")},handRedEnvelopes:function(){this.hideDrawer(),n("log","handRedEnvelopes"," at pages\\chat\\chat.vue:264")},chooseEmoji:function(){this.hideMore=!0,this.hideEmoji?(this.hideEmoji=!1,this.popupLayerClass="showLayer"):this.hideDrawer()},addEmoji:function(e){var t,i,n=this.cursor,s=this.textMsg;0!==n?(t=s.substring(0,n),i=s.substr(n),this.textMsg=t+e.alt+i):this.textMsg=e.alt+s},sendText:function(){var e=this;if(this.hideDrawer(),""!==this.textMsg){var t=this.textMsg;setTimeout(function(){e.textMsg=""},0),t=this.replaceEmoji(t);var i={action:"sendToUid",data:{send_id:this.user_info.id,receive_id:this.receive_id,message_type:"text",message:t,time:(new Date).getTime()}};this.sendSocketMessage(i)}},replaceEmoji:function(e){var t=e.replace(/\[([^(\]|\[)]*)\]/g,function(e){for(var t=0;t<r.EmojiAll.length;t++){var i=r.EmojiAll[t];if(i.alt==e){var n="https://qq.wyx2013.cn/upload/emoji/",s='<img src="'+n+i.url+'">';return s}}});return'<div class="talk-emoji" >'+t+"</div>"},floatTouchClick:function(e){n("log",e," at pages\\chat\\chat.vue:326")},getPrivateChat:function(){var e={action:"getPrivateChat",data:{send_id:this.user_info.id,receive_id:this.receive_id}};this.sendSocketMessage(e)}}};t.default=d}).call(this,i("6e42")["default"],i("0de9")["default"])},"8f43":function(e,t,i){},"9b8e":function(e,t,i){"use strict";var n={"chat-message":()=>Promise.all([i.e("common/vendor"),i.e("components/chat-message/chat-message")]).then(i.bind(null,"cd93")),"fa-icon":()=>i.e("components/fa-icon/fa-icon").then(i.bind(null,"5a9c")),"uni-popup":()=>i.e("components/uni-popup/uni-popup").then(i.bind(null,"ed41"))},s=function(){var e=this,t=e.$createElement;e._self._c},a=[];i.d(t,"b",function(){return s}),i.d(t,"c",function(){return a}),i.d(t,"a",function(){return n})},a155:function(e,t,i){"use strict";i.r(t);var n=i("85b4"),s=i.n(n);for(var a in n)"default"!==a&&function(e){i.d(t,e,function(){return n[e]})}(a);t["default"]=s.a},a4e9:function(e,t,i){"use strict";(function(e){i("68e3"),i("921b");n(i("66fd"));var t=n(i("b91b"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,i("6e42")["createPage"])},b91b:function(e,t,i){"use strict";i.r(t);var n=i("9b8e"),s=i("a155");for(var a in s)"default"!==a&&function(e){i.d(t,e,function(){return s[e]})}(a);i("cc98");var o,r=i("f0c5"),c=Object(r["a"])(s["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],o);t["default"]=c.exports},cc98:function(e,t,i){"use strict";var n=i("8f43"),s=i.n(n);s.a}},[["a4e9","common/runtime","common/vendor"]]]);