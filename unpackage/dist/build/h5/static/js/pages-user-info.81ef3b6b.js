(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-info"],{"1e1e":function(t,e,i){"use strict";var n=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("f499")),r=n(i("795b")),o=i("5ce8"),s={data:function(){return{isReady:!1}},computed:{isSocketOpen:function(){return this.$store.state.chat.isSocketOpen},ischatOnline:function(){return this.$store.state.chat.isOnline},user_info:function(){return this.$store.state.chat.user_info},token:function(){return this.$store.state.chat.token}},onLoad:function(){this.isSocketOpen&&!this.ischatOnline&&this.init(),this.isSocketOpen&&this.ischatOnline&&this.pageInit&&this.pageInit(),this.isReady=!0},watch:{isSocketOpen:function(t){t&&this.isSocketOpen&&!this.ischatOnline&&this.init()},ischatOnline:function(t){t&&this.pageInit&&this.isReady&&this.pageInit()}},methods:{init:function(){var t=this;this.initUserInfo().then(function(){t.ischatOnline||t.loginChat()})},initUserInfo:function(){var t=this;return new r.default(function(e,i){t.user_info.id?e():uni.getStorage({key:"chat_user_info",success:function(i){if(i.data.id&&i.data.token){var n=i.data,a=n.id,r=n.nickname,o=n.figureurl,s=n.token;t.$store.commit("setChatUserInfo",{id:a,nickname:r,figureurl:o}),t.$store.commit("setToken",s),e()}},fail:function(){uni.reLaunch({url:"/pages/login/index"})}})})},loginChat:function(){var t=this;uni.getStorage({key:"chat_user_info",success:function(e){var i=e.data,n=i.token,r=i.exp,s=new Date;s.getTime();var h={module:o.SocketModul,action:"onOpen",data:{user_info:t.user_info,token:n,exp:r}};uni.sendSocketMessage({data:(0,a.default)(h),fail:function(){return t.$store.commit("changeSocket",!1),!1}})},fail:function(){uni.reLaunch({url:"/pages/login/index"})}})},sendSocketMessage:function(t){var e=o.SocketModul,i=this;return new r.default(function(n,r){if(!t||!i.isSocketOpen)return!1;if("string"!==typeof t){var o=t,s=o.action,h=o.data,u={module:e,action:s,data:h};t=(0,a.default)(u)}uni.sendSocketMessage({data:t,success:function(t){n()},fail:function(){return i.$store.commit("changeSocket",!1),!1}})})}}};e.default=s},"32ff":function(t,e,i){"use strict";var n=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("cebc")),r=n(i("795b")),o=i("5ce8"),s={data:function(){return{showPopup:!1,popupMessage:""}},methods:{goChat:function(t){this.$store.commit("changPrivateiUser",t),uni.navigateTo({url:"/pages/chat/chat?id="+t.id})},uploadFile:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"img",n=this.token,s=this.user_info.id;return new r.default(function(r,h){uni.uploadFile({url:o.UploadFile+"?type="+i,filePath:t,name:"file",formData:(0,a.default)({token:n,chat_user_id:s},e),success:function(t){var i=t.data,n=e?(0,a.default)({},e):{};"string"===typeof i&&(i=JSON.parse(i)),i.url?(n.url=i.url,r(n)):h({message:"上传失败",data:t})},fail:function(t){h({message:t.errMsg})}})})},sendImage:function(t){var e=this;this.hideDrawer(),this.getImage(t).then(function(t){e.uploadFile(t.path,t).then(function(t){var i=t.url,n=t.width,a=t.height;if(i){var r={action:"sendToUid",data:{send_id:e.user_info.id,receive_id:e.receive_id,message_type:"img",url:i,width:n,height:a,time:(new Date).getTime()}};e.sendSocketMessage(r)}}).catch(function(t){e.popup(t)})}).catch(function(t){e.popup(t)})},getImage:function(t){return new r.default(function(e,i){uni.chooseImage({sourceType:[t],count:1,success:function(t){var n=t.tempFiles[0];n.size>102400&&i({message:"图片不能大于100K"}),uni.getImageInfo({src:n.path,success:function(t){var i=t.width,a=t.height,r=t.path;e({width:i,height:a,path:r,size:n.size})}})}})})},popup:function(t){var e=this;this.popupMessage=t.message||"末知错误",this.showPopup=!0,setTimeout(function(){return e.showPopup=!1},5e3)}}};e.default=s},"3b34":function(t,e,i){var n=i("467b");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("c9d3bfc0",n,!0,{sourceMap:!1,shadowMode:!1})},"3b8d":function(t,e,i){"use strict";i.r(e),i.d(e,"default",function(){return o});var n=i("795b"),a=i.n(n);function r(t,e,i,n,r,o,s){try{var h=t[o](s),u=h.value}catch(c){return void i(c)}h.done?e(u):a.a.resolve(u).then(n,r)}function o(t){return function(){var e=this,i=arguments;return new a.a(function(n,a){var o=t.apply(e,i);function s(t){r(o,n,a,s,h,"next",t)}function h(t){r(o,n,a,s,h,"throw",t)}s(void 0)})}}},"438d":function(t,e,i){"use strict";i.r(e);var n=i("ee08"),a=i("f1c7");for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);var o,s=i("f0c5"),h=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"7d4cf81c",null,!1,n["a"],o);e["default"]=h.exports},"467b":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".my-canvas[data-v-4e4a0970]{display:-webkit-box;display:-webkit-flex;display:flex;position:fixed!important;background:#000;left:0;z-index:100;width:100%}.my-avatar[data-v-4e4a0970]{width:100vw;height:100vw}.oper-canvas[data-v-4e4a0970]{display:-webkit-box;display:-webkit-flex;display:flex;position:fixed!important;left:0;z-index:101;width:100%}.oper-wrapper[data-v-4e4a0970]{height:71px;position:fixed!important;box-sizing:border-box;width:100%;left:0;bottom:0;z-index:200;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row}.btn-wrapper[data-v-4e4a0970]{background-color:#000;color:#fff;display:-webkit-box;display:-webkit-flex;display:flex;height:100%;width:100%;-webkit-justify-content:space-around;justify-content:space-around;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.btn-wrapper uni-view[data-v-4e4a0970]{width:%?160?%;height:%?80?%;line-height:%?80?%;text-align:center;font-size:16px;color:#fff;z-index:300}.hover[data-v-4e4a0970]{color:#f1f1f1}",""])},"7ba0":function(t,e,i){"use strict";var n=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("34ef"),i("4917"),i("28a5");var a=n(i("795b"));i("96cf");var r=n(i("3b8d")),o=n(i("0a0d")),s=n(i("e814")),h=70,u={name:"cropper",data:function(){return{cvsStyleHeight:"0px",styleDisplay:"none",styleTop:"-10000px",prvTop:"-10000px",imgStyle:{},selStyle:{},showOper:!0,imgSrc:{imgSrc:""},qlty:.9,postWidthFirst:{}}},watch:{avatarSrc:function(){this.imgSrc.imgSrc=this.avatarSrc}},props:{avatarSrc:"",avatarStyle:"",selWidth:"",selHeight:"",expWidth:"",expHeight:"",minScale:"",maxScale:"",canScale:"",noTab:"",quality:"",index:""},created:function(){var t=this;this.ctxCanvas=uni.createCanvasContext("avatar-canvas",this),this.ctxCanvasOper=uni.createCanvasContext("oper-canvas",this),this.qlty=(0,s.default)(this.quality)||.9,this.imgSrc.imgSrc=this.avatarSrc,this.letScale="false"===this.canScale?0:1,this.indx=this.index||void 0,this.mnScale=this.minScale||.3,this.mxScale=this.maxScale||4,this.noBar="true"===this.noTab?1:0,this.noBar?(this.moreHeight=0,this.fWindowResize()):uni.showTabBar({complete:function(e){t.moreHeight="showTabBar:ok"===e.errMsg?50:0,t.fWindowResize()}})},methods:{fWindowResize:function(){var t=uni.getSystemInfoSync();this.platform=t.platform,this.pixelRatio=t.pixelRatio,this.windowWidth=t.windowWidth,this.drawTop=t.windowTop,this.windowHeight=t.windowHeight+t.windowBottom,this.cvsStyleHeight=this.windowHeight-h+"px",this.pxRatio=this.windowWidth/750;var e=this.avatarStyle;this.imgStyle=e,this.expWidth&&(this.exportWidth=this.expWidth.indexOf("rpx")>=0?(0,s.default)(this.expWidth)*this.pxRatio:(0,s.default)(this.expWidth)),this.expHeight&&(this.exportHeight=this.expHeight.indexOf("rpx")>=0?(0,s.default)(this.expHeight)*this.pxRatio:(0,s.default)(this.expHeight)),"flex"===this.styleDisplay&&this.fDrawInit(!0),this.fHideImg()},fSelect:function(){var t=this;this.fSelecting||(this.fSelecting=!0,setTimeout(function(){t.fSelecting=!1},500),uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["camera","album"],success:function(e){uni.showLoading({mask:!0});var i=t.imgPath=e.tempFilePaths[0];uni.getImageInfo({src:i,success:function(e){if(t.imgWidth=e.width,t.imgHeight=e.height,t.path=i,!t.hasSel){var n=t.selStyle||{};if(!t.selWidth||!t.selHeight)return void uni.showModal({title:"裁剪框的宽或高没有设置",showCancel:!1});var a=t.selWidth.indexOf("rpx")>=0?(0,s.default)(t.selWidth)*t.pxRatio:(0,s.default)(t.selWidth),r=t.selHeight.indexOf("rpx")>=0?(0,s.default)(t.selHeight)*t.pxRatio:(0,s.default)(t.selHeight);n.width=(0,s.default)(a),n.height=(0,s.default)(r),n.top=(0,s.default)((t.windowHeight-n.height-h)/2),n.left=(0,s.default)((t.windowWidth-n.width)/2),t.selStyle=n}t.noBar?t.fDrawInit(!0):uni.hideTabBar({complete:function(){t.fDrawInit(!0)}})},fail:function(){uni.showToast({title:"error3",duration:2e3})},complete:function(){uni.hideLoading()}})}}))},fUpload:function(){var t=this;if(!this.fUploading){this.fUploading=!0,setTimeout(function(){t.fUploading=!1},1e3);var e=this.selStyle,i=(0,s.default)(e.left),n=(0,s.default)(e.top),a=(0,s.default)(e.width),r=(0,s.default)(e.height),o=this.exportWidth||a,h=this.exportHeight||r;i*=this.pixelRatio,n*=this.pixelRatio,o=a,h=r,this.styleDisplay="none",this.styleTop="-10000px",this.hasSel=!1,this.fHideImg(),uni.canvasToTempFilePath({x:i,y:n,width:a,height:r,destWidth:o,destHeight:h,canvasId:"avatar-canvas",fileType:"png",quality:this.qlty,success:function(e){e=e.tempFilePath,t.btop(e).then(function(e){if(t.exportWidth&&t.exportHeight){var i=t.ctxCanvas;o=t.exportWidth,h=t.exportHeight,i.drawImage(e,0,0,o,h),i.draw(!1,function(){uni.canvasToTempFilePath({x:0,y:0,width:o,height:h,destWidth:o,destHeight:h,canvasId:"avatar-canvas",fileType:"png",quality:t.qlty,success:function(e){e=e.tempFilePath,t.btop(e).then(function(e){t.$emit("upload",{avatar:t.imgSrc,path:e,index:t.indx})})},fail:function(){uni.showToast({title:"error0",duration:2e3})}})})}else t.$emit("upload",{avatar:t.imgSrc,path:e,index:t.indx})})},fail:function(t){uni.showToast({title:"error1",duration:2e3})},complete:function(){t.noBar||uni.showTabBar()}},this)}},fDrawInit:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.windowWidth,n=this.windowHeight,a=this.imgWidth,r=this.imgHeight,o=a/r,u=i,c=n-h,l=(this.pixelRatio,(0,s.default)(this.selStyle.width)),f=(0,s.default)(this.selStyle.height);this.fixWidth=0,this.fixHeight=0,this.fixWidth?(u=l,c=u/o):this.fixHeight?(c=f,u=c*o):o<1?(u=l,c=(0,s.default)(u/o)):(c=f,u=(0,s.default)(c*o)),this.scaleSize=1,this.rotateDeg=0,this.posWidth=(0,s.default)((i-u)/2),this.posHeight=(0,s.default)((n-c-h)/2),this.useWidth=u,this.useHeight=c;var d=this.selStyle,p=(0,s.default)(d.left),v=(0,s.default)(d.top),g=(0,s.default)(d.width),w=(0,s.default)(d.height),m=(this.canvas,this.canvasOper,this.ctxCanvas),y=this.ctxCanvasOper;y.setFillStyle("rgba(0,0,0, 0.5)"),y.fillRect(0,0,this.windowWidth,v),y.fillRect(0,v,p,w),y.fillRect(0,v+w,this.windowWidth,this.windowHeight-w-h-v),y.fillRect(p+g,v,this.windowWidth-g-p,w),y.setLineWidth(1),y.setStrokeStyle("rgba(255, 255, 255,1)"),y.strokeRect(p,v,g,w),y.setLineWidth(3),y.setStrokeStyle("rgba(255, 255, 255, 1)"),y.moveTo(p+20,v),y.lineTo(p,v),y.lineTo(p,v+20),y.moveTo(p+g-20,v),y.lineTo(p+g,v),y.lineTo(p+g,v+20),y.moveTo(p+20,v+w),y.lineTo(p,v+w),y.lineTo(p,v+w-20),y.moveTo(p+g-20,v+w),y.lineTo(p+g,v+w),y.lineTo(p+g,v+w-20),y.stroke(),this.postFirst={left:p,top:v,width:g,height:l,posWidth:this.posWidth,posHeight:this.posHeight},y.draw(!1,function(){e&&(t.styleDisplay="flex",t.styleTop=t.drawTop+"px",m.setFillStyle("black"),t.fDrawImage())}),this.$emit("avtinit")},fDrawImage:function(){var t=(0,o.default)();if(!(t-this.drawTm<20)){this.drawTm=t;var e=this.ctxCanvas;e.fillRect(0,0,this.windowWidth,this.windowHeight-h),e.translate(this.posWidth+this.useWidth/2,this.posHeight+this.useHeight/2),e.scale(this.scaleSize,this.scaleSize),e.drawImage(this.imgPath,-this.useWidth/2,-this.useHeight/2,this.useWidth,this.useHeight),e.draw(!1)}},fHideImg:function(){this.prvImg="",this.prvTop="-10000px",this.showOper=!0,this.prvImgData=null,this.target=null},fClose:function(){this.styleDisplay="none",this.styleTop="-10000px",this.hasSel=!1,this.fHideImg(),this.noBar||uni.showTabBar()},fStart:function(t){var e=t.touches,i=e[0],n=e[1];if(this.touch0=i,this.touch1=n,n){var a=n.x-i.x,r=n.y-i.y;this.fgDistance=Math.sqrt(a*a+r*r)}},fMove:function(t){var e=t.touches,i=e[0],n=e[1];if(n){var a=n.x-i.x,r=n.y-i.y,o=Math.sqrt(a*a+r*r),s=.005*(o-this.fgDistance),h=this.scaleSize+s;do{if(!this.letScale)break;if(h<this.mnScale)break;if(h>this.mxScale)break;this.scaleSize=h}while(0);this.fgDistance=o,n.x!==i.x&&this.letRotate&&(a=(this.touch1.y-this.touch0.y)/(this.touch1.x-this.touch0.x),r=(n.y-i.y)/(n.x-i.x),this.rotateDeg+=180*Math.atan((r-a)/(1+a*r))/Math.PI,this.touch0=i,this.touch1=n),this.fDrawImage()}else if(this.touch0){var u=i.x-this.touch0.x,c=i.y-this.touch0.y,l=this.posWidth+u,f=this.posHeight+c;Math.abs(u)<100&&!this.lckWidth&&(this.posWidth=l),Math.abs(c)<100&&!this.lckHeight&&(this.posHeight=f),this.touch0=i,this.fDrawImage()}},fEnd:function(){var t=(0,r.default)(regeneratorRuntime.mark(function t(e){var i,n,a,r,o,s,h,u,c;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:i=this,n=e.touches,a=n&&n[0],n&&n[1],i.scaleSize<1?(r=i.selStyle,o=i.imgWidth/i.imgHeight,o<1&&i.scaleSize*i.useWidth<r.width?(i.posWidth=r.left,i.scaleSize=1,setTimeout(function(){i.fDrawImage()},100)):i.scaleSize*i.useHeight<r.width&&(i.posHeight=r.top,i.scaleSize=1,setTimeout(function(){i.fDrawImage()},100))):1==this.scaleSize&&(s=this.posWidth-this.postFirst.posWidth,h=this.postFirst.left-this.postFirst.posWidth,u=this.posHeight-this.postFirst.posHeight,c=this.postFirst.top-this.postFirst.posHeight,s>0&&this.posWidth>this.postFirst.left?this.posWidth=this.postFirst.left:s<0&&s<h&&(this.posWidth=-this.postFirst.left+2*this.postFirst.posWidth),u<0&&this.posHeight<this.postFirst.top?this.posHeight=-this.postFirst.top+2*this.postFirst.posHeight+1:u>0&&u>c&&(this.posHeight=this.postFirst.top),setTimeout(function(){i.fDrawImage()},100)),a?this.touch0=a:(this.touch0=null,this.touch1=null);case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),btop:function(t){return new a.default(function(e,i){var n=t.split(","),a=n[0].match(/:(.*?);/)[1],r=atob(n[1]),o=r.length,s=new Uint8Array(o);while(o--)s[o]=r.charCodeAt(o);return e((window.URL||window.webkitURL).createObjectURL(new Blob([s],{type:a})))})}}};e.default=u},"96cf":function(t,e){!function(e){"use strict";var i,n=Object.prototype,a=n.hasOwnProperty,r="function"===typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",h=r.toStringTag||"@@toStringTag",u="object"===typeof t,c=e.regeneratorRuntime;if(c)u&&(t.exports=c);else{c=e.regeneratorRuntime=u?t.exports:{},c.wrap=x;var l="suspendedStart",f="suspendedYield",d="executing",p="completed",v={},g={};g[o]=function(){return this};var w=Object.getPrototypeOf,m=w&&w(w(C([])));m&&m!==n&&a.call(m,o)&&(g=m);var y=T.prototype=S.prototype=Object.create(g);k.prototype=y.constructor=T,T.constructor=k,T[h]=k.displayName="GeneratorFunction",c.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===k||"GeneratorFunction"===(e.displayName||e.name))},c.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,T):(t.__proto__=T,h in t||(t[h]="GeneratorFunction")),t.prototype=Object.create(y),t},c.awrap=function(t){return{__await:t}},_(H.prototype),H.prototype[s]=function(){return this},c.AsyncIterator=H,c.async=function(t,e,i,n){var a=new H(x(t,e,i,n));return c.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(y),y[h]="Generator",y[o]=function(){return this},y.toString=function(){return"[object Generator]"},c.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){while(e.length){var n=e.pop();if(n in t)return i.value=n,i.done=!1,i}return i.done=!0,i}},c.values=C,F.prototype={constructor:F,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(L),!t)for(var e in this)"t"===e.charAt(0)&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=i)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,a){return s.type="throw",s.arg=t,e.next=n,a&&(e.method="next",e.arg=i),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var h=a.call(o,"catchLoc"),u=a.call(o,"finallyLoc");if(h&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(h){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var r=n;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=t,o.arg=e,r?(this.method="next",this.next=r.finallyLoc,v):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),L(i),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var n=i.completion;if("throw"===n.type){var a=n.arg;L(i)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:C(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=i),v}}}function x(t,e,i,n){var a=e&&e.prototype instanceof S?e:S,r=Object.create(a.prototype),o=new F(n||[]);return r._invoke=W(t,i,o),r}function b(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(n){return{type:"throw",arg:n}}}function S(){}function k(){}function T(){}function _(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function H(t){function e(i,n,r,o){var s=b(t[i],t,n);if("throw"!==s.type){var h=s.arg,u=h.value;return u&&"object"===typeof u&&a.call(u,"__await")?Promise.resolve(u.__await).then(function(t){e("next",t,r,o)},function(t){e("throw",t,r,o)}):Promise.resolve(u).then(function(t){h.value=t,r(h)},function(t){return e("throw",t,r,o)})}o(s.arg)}var i;function n(t,n){function a(){return new Promise(function(i,a){e(t,n,i,a)})}return i=i?i.then(a,a):a()}this._invoke=n}function W(t,e,i){var n=l;return function(a,r){if(n===d)throw new Error("Generator is already running");if(n===p){if("throw"===a)throw r;return E()}i.method=a,i.arg=r;while(1){var o=i.delegate;if(o){var s=O(o,i);if(s){if(s===v)continue;return s}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===l)throw n=p,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var h=b(t,e,i);if("normal"===h.type){if(n=i.done?p:f,h.arg===v)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(n=p,i.method="throw",i.arg=h.arg)}}}function O(t,e){var n=t.iterator[e.method];if(n===i){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=i,O(t,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var a=b(n,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,v;var r=a.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=i),e.delegate=null,v):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function C(t){if(t){var e=t[o];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){while(++n<t.length)if(a.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=i,e.done=!0,e};return r.next=r}}return{next:E}}function E(){return{value:i,done:!0}}}(function(){return this||"object"===typeof self&&self}()||Function("return this")())},ae07:function(t,e,i){"use strict";i.r(e);var n=i("7ba0"),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e["default"]=a.a},c27f:function(t,e,i){"use strict";var n,a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-image",{staticClass:"my-avatar",style:t.imgStyle,attrs:{src:t.imgSrc.imgSrc,mode:"aspectFill"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.fSelect.apply(void 0,arguments)}}}),i("v-uni-canvas",{staticClass:"my-canvas",style:{top:t.styleTop,height:t.cvsStyleHeight},attrs:{"canvas-id":"avatar-canvas",id:"avatar-canvas","disable-scroll":"false"}}),i("v-uni-canvas",{staticClass:"oper-canvas",style:{top:t.styleTop,height:t.cvsStyleHeight},attrs:{"canvas-id":"oper-canvas",id:"oper-canvas","disable-scroll":"false"},on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.fStart.apply(void 0,arguments)},touchmove:function(e){arguments[0]=e=t.$handleEvent(e),t.fMove.apply(void 0,arguments)},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.fEnd.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"oper-wrapper",style:{display:t.styleDisplay}},[t.showOper?i("v-uni-view",{staticClass:"btn-wrapper"},[i("v-uni-view",{attrs:{"hover-class":"hover"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.fClose.apply(void 0,arguments)}}},[t._v("取消")]),i("v-uni-view",{attrs:{"hover-class":"hover"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.fUpload.apply(void 0,arguments)}}},[t._v("选取")])],1):t._e()],1)],1)},r=[];i.d(e,"b",function(){return a}),i.d(e,"c",function(){return r}),i.d(e,"a",function(){return n})},cf19:function(t,e,i){"use strict";var n=i("3b34"),a=i.n(n);a.a},d289:function(t,e,i){"use strict";var n=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("5176")),r=n(i("cebc")),o=n(i("efd7")),s=n(i("32ff")),h=n(i("1e1e")),u=i("5ce8"),c={components:{cropper:o.default},mixins:[h.default,s.default],data:function(){return{figureurl:"",isChange:!1}},watch:{"user_info.id":function(t){this.figureurl=this.user_info.figureurl}},created:function(){this.figureurl=this.user_info.figureurl},methods:{getPage:function(){},myUpload:function(t){console.log(t),this.isChange=!0,this.figureurl=t.path},submit:function(t){var e=this;if(this.isChange){var i=this,n=this.token,o=this.user_info.id;this.uploadFile(this.figureurl,{ext:1}).then(function(s){e.figureurl=s.url,e.isChange=!1,uni.request({url:u.updataUserInfo,method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:(0,r.default)({},t.detail.value,{token:n,chat_user_id:o,figureurl:e.figureurl}),success:function(t){var e=t.data,n=e.id,r=e.figureurl,o=e.nickname;i.$store.commit("setChatUserInfo",{id:n,figureurl:r,nickname:o}),uni.getStorage({key:"chat_user_info",success:function(t){(0,a.default)(t.data,{figureurl:r,nickname:o}),uni.setStorage({key:"chat_user_info",data:t.data})}})}})})}}}};e.default=c},ee08:function(t,e,i){"use strict";var n={cropper:i("efd7").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-form",{on:{submit:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"input-flex"},[i("v-uni-view",{staticClass:"input-flex-label"},[t._v("昵称")]),i("v-uni-input",{staticClass:"input-flex-text",attrs:{name:"nickname",value:t.user_info.nickname}})],1),i("v-uni-view",{staticClass:"input-flex"},[i("v-uni-view",{staticStyle:{"text-align":"center"}},[t._v("点击修改头像")])],1),i("v-uni-view",{staticClass:" flex flex-jc-center flex-ai-center  mgt-10"},[i("cropper",{attrs:{selWidth:"500rpx",selHeight:"500rpx",avatarSrc:t.figureurl,avatarStyle:"width:50vw;height:50vw;"},on:{upload:function(e){arguments[0]=e=t.$handleEvent(e),t.myUpload.apply(void 0,arguments)}}})],1),i("v-uni-button",{staticClass:"btn-row-submit",attrs:{"form-type":"submit"}},[t._v("提交")])],1)],1)},r=[];i.d(e,"b",function(){return a}),i.d(e,"c",function(){return r}),i.d(e,"a",function(){return n})},efd7:function(t,e,i){"use strict";i.r(e);var n=i("c27f"),a=i("ae07");for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i("cf19");var o,s=i("f0c5"),h=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"4e4a0970",null,!1,n["a"],o);e["default"]=h.exports},f1c7:function(t,e,i){"use strict";i.r(e);var n=i("d289"),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e["default"]=a.a}}]);