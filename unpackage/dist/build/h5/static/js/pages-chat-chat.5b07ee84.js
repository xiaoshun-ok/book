(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-chat-chat"],{"0188":function(t,i,e){"use strict";var a={"fa-icon":e("e0bc").default},n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"bubble",style:{float:t.isSelf}},["text"===t.row.message_type?[e("v-uni-rich-text",{attrs:{nodes:t.messageText}})]:"voice"===t.row.message_type?[e("v-uni-view",{staticClass:"voice-message",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.playAudio(t.row)}}},[e("v-uni-view",{staticClass:"voice-message-percent"},[e("v-uni-progress",{attrs:{percent:t.percent,"stroke-width":"10"}})],1),e("v-uni-view",{staticClass:"voice-message-text"},[t._v(t._s(t.voiceLength))]),e("v-uni-view",{staticClass:"voice-message-icon"},[e("fa-icon",{attrs:{type:"caret-square-o-right",size:"22"}})],1)],1)]:"img"===t.row.message_type?[e("v-uni-view",{staticClass:"img"},[e("v-uni-image",{staticClass:"voice-message-img",style:{width:t.imgWidth+"px",height:t.imgHeight+"px"},attrs:{src:t.imgUrl,mode:"aspectFit"}})],1)]:"text1"===t.row.message_type?void 0:t._e()],2)},r=[];e.d(i,"b",function(){return n}),e.d(i,"c",function(){return r}),e.d(i,"a",function(){return a})},"05e8":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e("28a5"),e("3b2b"),e("a481"),e("4917");var a=/^<([-A-Za-z0-9_]+)((?:\s+[a-zA-Z_:][-a-zA-Z0-9_:.]*(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,n=/^<\/([-A-Za-z0-9_]+)[^>]*>/,r=/([a-zA-Z_:][-a-zA-Z0-9_:.]*)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,l=d("area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr"),s=d("a,address,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video"),u=d("abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),o=d("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),c=d("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),f=d("script,style");function p(t,i){var e,p,d,g=[],h=t;g.last=function(){return this[this.length-1]};while(t){if(p=!0,g.last()&&f[g.last()])t=t.replace(new RegExp("([\\s\\S]*?)</"+g.last()+"[^>]*>"),function(t,e){return e=e.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g,"$1$2"),i.chars&&i.chars(e),""}),w("",g.last());else if(0==t.indexOf("\x3c!--")?(e=t.indexOf("--\x3e"),e>=0&&(i.comment&&i.comment(t.substring(4,e)),t=t.substring(e+3),p=!1)):0==t.indexOf("</")?(d=t.match(n),d&&(t=t.substring(d[0].length),d[0].replace(n,w),p=!1)):0==t.indexOf("<")&&(d=t.match(a),d&&(t=t.substring(d[0].length),d[0].replace(a,m),p=!1)),p){e=t.indexOf("<");var v=e<0?t:t.substring(0,e);t=e<0?"":t.substring(e),i.chars&&i.chars(v)}if(t==h)throw"Parse Error: "+t;h=t}function m(t,e,a,n){if(e=e.toLowerCase(),s[e])while(g.last()&&u[g.last()])w("",g.last());if(o[e]&&g.last()==e&&w("",e),n=l[e]||!!n,n||g.push(e),i.start){var f=[];a.replace(r,function(t,i){var e=arguments[2]?arguments[2]:arguments[3]?arguments[3]:arguments[4]?arguments[4]:c[i]?i:"";f.push({name:i,value:e,escaped:e.replace(/(^|[^\\])"/g,'$1\\"')})}),i.start&&i.start(e,f,n)}}function w(t,e){if(e){for(a=g.length-1;a>=0;a--)if(g[a]==e)break}else var a=0;if(a>=0){for(var n=g.length-1;n>=a;n--)i.end&&i.end(g[n]);g.length=a}}w()}function d(t){for(var i={},e=t.split(","),a=0;a<e.length;a++)i[e[a]]=!0;return i}function g(t){return t.replace(/<\?xml.*\?>\n/,"").replace(/<!doctype.*>\n/,"").replace(/<!DOCTYPE.*>\n/,"")}function h(t){return t.reduce(function(t,i){var e=i.value,a=i.name;return t[a]?t[a]=t[a]+" "+e:t[a]=e,t},{})}function v(t){t=g(t);var i=[],e={node:"root",children:[]};return p(t,{start:function(t,a,n){var r={name:t};if(0!==a.length&&(r.attrs=h(a)),n){var l=i[0]||e;l.children||(l.children=[]),l.children.push(r)}else i.unshift(r)},end:function(t){var a=i.shift();if(a.name!==t&&console.error("invalid state: mismatch end tag"),0===i.length)e.children.push(a);else{var n=i[0];n.children||(n.children=[]),n.children.push(a)}},chars:function(t){var a={type:"text",text:t};if(0===i.length)e.children.push(a);else{var n=i[0];n.children||(n.children=[]),n.children.push(a)}},comment:function(t){var e={node:"comment",text:t},a=i[0];a.children||(a.children=[]),a.children.push(e)}}),e.children}var m=v;i.default=m},1955:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a={data:function(){return{isVoice:!1,voiceTis:"按住 说话",recordTis:"手指上滑 取消发送",recording:!1,willStop:!1,initPoint:{identifier:0,Y:0},recordTimer:null,recordLength:0}},onLoad:function(t){},methods:{}};i.default=a},"1ce8":function(t,i,e){"use strict";var a=e("288e");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=a(e("f499")),r=a(e("795b")),l=e("b7c4"),s={data:function(){return{isReady:!1}},computed:{isSocketOpen:function(){return this.$store.state.chat.isSocketOpen},ischatOnline:function(){return this.$store.state.chat.isOnline},user_info:function(){return this.$store.state.chat.user_info},token:function(){return this.$store.state.chat.token}},onLoad:function(){this.isSocketOpen&&!this.ischatOnline&&this.init(),this.isSocketOpen&&this.ischatOnline&&this.pageInit&&this.pageInit(),this.isReady=!0},watch:{isSocketOpen:function(t){t&&this.isSocketOpen&&!this.ischatOnline&&this.init()},ischatOnline:function(t){t&&this.pageInit&&this.isReady&&this.pageInit()}},methods:{init:function(){var t=this;this.initUserInfo().then(function(){t.ischatOnline||t.loginChat()})},initUserInfo:function(){var t=this;return new r.default(function(i,e){t.user_info.id?i():uni.getStorage({key:"chat_user_info",success:function(e){if(e.data.id&&e.data.token){var a=e.data,n=a.id,r=a.nickname,l=a.figureurl,s=a.token;t.$store.commit("setChatUserInfo",{id:n,nickname:r,figureurl:l}),t.$store.commit("setToken",s),i()}},fail:function(){uni.reLaunch({url:"/pages/login/index"})}})})},loginChat:function(){var t=this;uni.getStorage({key:"chat_user_info",success:function(i){var e=i.data,a=e.token,r=e.exp,s=new Date;s.getTime();var u={module:l.SocketModul,action:"onOpen",data:{user_info:t.user_info,token:a,exp:r}};uni.sendSocketMessage({data:(0,n.default)(u),fail:function(){return t.$store.commit("changeSocket",!1),!1}})},fail:function(){uni.reLaunch({url:"/pages/login/index"})}})},sendSocketMessage:function(t){var i=l.SocketModul,e=this;return new r.default(function(a,r){if(!t||!e.isSocketOpen)return!1;if("string"!==typeof t){var l=t,s=l.action,u=l.data,o={module:i,action:s,data:u};t=(0,n.default)(o)}uni.sendSocketMessage({data:t,success:function(t){a()},fail:function(){return e.$store.commit("changeSocket",!1),!1}})})}}};i.default=s},2276:function(t,i,e){"use strict";e.r(i);var a=e("7c3c"),n=e.n(a);for(var r in a)"default"!==r&&function(t){e.d(i,t,function(){return a[t]})}(r);i["default"]=n.a},"237c":function(t,i,e){"use strict";var a=e("847b"),n=e.n(a);n.a},"29f0":function(t,i,e){var a=e("502c");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=e("4f06").default;n("1bf3a7cc",a,!0,{sourceMap:!1,shadowMode:!1})},"43c9":function(t,i,e){"use strict";var a=e("288e");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=a(e("cebc")),r=a(e("795b")),l=e("b7c4"),s={data:function(){return{showPopup:!1,popupMessage:""}},methods:{goChat:function(t){this.$store.commit("changPrivateiUser",t),uni.navigateTo({url:"/pages/chat/chat?id="+t.id})},uploadFile:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"img",a=this.token,s=this.user_info.id;return new r.default(function(r,u){uni.uploadFile({url:l.UploadFile+"?type="+e,filePath:t,name:"file",formData:(0,n.default)({token:a,chat_user_id:s},i),success:function(t){var e=t.data,a=i?(0,n.default)({},i):{};"string"===typeof e&&(e=JSON.parse(e)),e.url?(a.url=e.url,r(a)):u({message:"上传失败",data:t})},fail:function(t){u({message:t.errMsg})}})})},sendImage:function(t){var i=this;this.hideDrawer(),this.getImage(t).then(function(t){i.uploadFile(t.path,t).then(function(t){var e=t.url,a=t.width,n=t.height;if(e){var r={action:"sendToUid",data:{send_id:i.user_info.id,receive_id:i.receive_id,message_type:"img",url:e,width:a,height:n,time:(new Date).getTime()}};i.sendSocketMessage(r)}}).catch(function(t){i.popup(t)})}).catch(function(t){i.popup(t)})},getImage:function(t){return new r.default(function(i,e){uni.chooseImage({sourceType:[t],count:1,success:function(t){var a=t.tempFiles[0];a.size>102400&&e({message:"图片不能大于100K"}),uni.getImageInfo({src:a.path,success:function(t){var e=t.width,n=t.height,r=t.path;i({width:e,height:n,path:r,size:a.size})}})}})})},popup:function(t){var i=this;this.popupMessage=t.message||"末知错误",this.showPopup=!0,setTimeout(function(){return i.showPopup=!1},5e3)}}};i.default=s},"502c":function(t,i,e){i=t.exports=e("2350")(!1),i.push([t.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.uni-popup[data-v-a0b6e51e]{position:fixed;top:0;bottom:0;left:0;right:0;z-index:99999;overflow:hidden}.uni-popup__mask[data-v-a0b6e51e]{position:absolute;top:0;bottom:0;left:0;right:0;z-index:998;background:rgba(0,0,0,.4);opacity:0}.uni-popup__mask.ani[data-v-a0b6e51e]{-webkit-transition:all .3s;transition:all .3s}.uni-popup__mask.uni-bottom[data-v-a0b6e51e],.uni-popup__mask.uni-center[data-v-a0b6e51e],.uni-popup__mask.uni-top[data-v-a0b6e51e]{opacity:1}.uni-popup__wrapper[data-v-a0b6e51e]{position:absolute;z-index:999;box-sizing:border-box}.uni-popup__wrapper.ani[data-v-a0b6e51e]{-webkit-transition:all .3s;transition:all .3s}.uni-popup__wrapper.top[data-v-a0b6e51e]{top:0;left:0;width:100%;-webkit-transform:translateY(-100%);transform:translateY(-100%)}.uni-popup__wrapper.bottom[data-v-a0b6e51e]{bottom:0;left:0;width:100%;-webkit-transform:translateY(100%);transform:translateY(100%)}.uni-popup__wrapper.center[data-v-a0b6e51e]{width:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-transform:scale(1.2);transform:scale(1.2);opacity:0}.uni-popup__wrapper-box[data-v-a0b6e51e]{position:relative;box-sizing:border-box}.uni-popup__wrapper.uni-custom .uni-popup__wrapper-box[data-v-a0b6e51e]{padding:%?30?%;background:#fff}.uni-popup__wrapper.uni-custom.center .uni-popup__wrapper-box[data-v-a0b6e51e]{position:relative;max-width:80%;max-height:80%;overflow-y:scroll}.uni-popup__wrapper.uni-custom.bottom .uni-popup__wrapper-box[data-v-a0b6e51e],.uni-popup__wrapper.uni-custom.top .uni-popup__wrapper-box[data-v-a0b6e51e]{width:100%;max-height:500px;overflow-y:scroll}.uni-popup__wrapper.uni-bottom[data-v-a0b6e51e],.uni-popup__wrapper.uni-top[data-v-a0b6e51e]{-webkit-transform:translateY(0);transform:translateY(0)}.uni-popup__wrapper.uni-center[data-v-a0b6e51e]{-webkit-transform:scale(1);transform:scale(1);opacity:1}',""])},"53ae":function(t,i,e){"use strict";e.r(i);var a=e("b5ed"),n=e("949c");for(var r in n)"default"!==r&&function(t){e.d(i,t,function(){return n[t]})}(r);e("237c");var l,s=e("f0c5"),u=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"6a743c28",null,!1,a["a"],l);i["default"]=u.exports},"68d1":function(t,i,e){"use strict";var a,n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return t.showPopup?e("v-uni-view",{staticClass:"uni-popup"},[e("v-uni-view",{staticClass:"uni-popup__mask",class:[t.ani,t.animation?"ani":"",t.custom?"":"uni-custom"],on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.close(!0)}}}),e("v-uni-view",{staticClass:"uni-popup__wrapper",class:[t.type,t.ani,t.animation?"ani":"",t.custom?"":"uni-custom"],on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.close(!0)}}},[e("v-uni-view",{staticClass:"uni-popup__wrapper-box",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.clear.apply(void 0,arguments)}}},[t._t("default")],2)],1)],1):t._e()},r=[];e.d(i,"b",function(){return n}),e.d(i,"c",function(){return r}),e.d(i,"a",function(){return a})},"7b5e":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.EmojiAll=i.EmojiList=void 0;var a=[[{url:"100.gif",alt:"[微笑]"},{url:"101.gif",alt:"[伤心]"},{url:"102.gif",alt:"[美女]"},{url:"103.gif",alt:"[发呆]"},{url:"104.gif",alt:"[墨镜]"},{url:"105.gif",alt:"[哭]"},{url:"106.gif",alt:"[羞]"},{url:"107.gif",alt:"[哑]"},{url:"108.gif",alt:"[睡]"},{url:"109.gif",alt:"[哭]"},{url:"110.gif",alt:"[囧]"},{url:"111.gif",alt:"[怒]"},{url:"112.gif",alt:"[调皮]"},{url:"113.gif",alt:"[笑]"},{url:"114.gif",alt:"[惊讶]"},{url:"115.gif",alt:"[难过]"},{url:"116.gif",alt:"[酷]"},{url:"117.gif",alt:"[汗]"},{url:"118.gif",alt:"[抓狂]"},{url:"119.gif",alt:"[吐]"},{url:"120.gif",alt:"[笑]"},{url:"121.gif",alt:"[快乐]"},{url:"122.gif",alt:"[奇]"},{url:"123.gif",alt:"[傲]"}],[{url:"124.gif",alt:"[饿]"},{url:"125.gif",alt:"[累]"},{url:"126.gif",alt:"[吓]"},{url:"127.gif",alt:"[汗]"},{url:"128.gif",alt:"[高兴]"},{url:"129.gif",alt:"[闲]"},{url:"130.gif",alt:"[努力]"},{url:"131.gif",alt:"[骂]"},{url:"132.gif",alt:"[疑问]"},{url:"133.gif",alt:"[秘密]"},{url:"134.gif",alt:"[乱]"},{url:"135.gif",alt:"[疯]"},{url:"136.gif",alt:"[哀]"},{url:"137.gif",alt:"[鬼]"},{url:"138.gif",alt:"[打击]"},{url:"139.gif",alt:"[bye]"},{url:"140.gif",alt:"[汗]"},{url:"141.gif",alt:"[抠]"},{url:"142.gif",alt:"[鼓掌]"},{url:"143.gif",alt:"[糟糕]"},{url:"144.gif",alt:"[恶搞]"},{url:"145.gif",alt:"[什么]"},{url:"146.gif",alt:"[什么]"},{url:"147.gif",alt:"[累]"}],[{url:"148.gif",alt:"[看]"},{url:"149.gif",alt:"[难过]"},{url:"150.gif",alt:"[难过]"},{url:"151.gif",alt:"[坏]"},{url:"152.gif",alt:"[亲]"},{url:"153.gif",alt:"[吓]"},{url:"154.gif",alt:"[可怜]"},{url:"155.gif",alt:"[刀]"},{url:"156.gif",alt:"[水果]"},{url:"157.gif",alt:"[酒]"},{url:"158.gif",alt:"[篮球]"},{url:"159.gif",alt:"[乒乓]"},{url:"160.gif",alt:"[咖啡]"},{url:"161.gif",alt:"[美食]"},{url:"162.gif",alt:"[动物]"},{url:"163.gif",alt:"[鲜花]"},{url:"164.gif",alt:"[枯]"},{url:"165.gif",alt:"[唇]"},{url:"166.gif",alt:"[爱]"},{url:"167.gif",alt:"[分手]"},{url:"168.gif",alt:"[生日]"},{url:"169.gif",alt:"[电]"},{url:"170.gif",alt:"[炸弹]"},{url:"171.gif",alt:"[刀子]"}],[{url:"172.gif",alt:"[足球]"},{url:"173.gif",alt:"[瓢虫]"},{url:"174.gif",alt:"[翔]"},{url:"175.gif",alt:"[月亮]"},{url:"176.gif",alt:"[太阳]"},{url:"177.gif",alt:"[礼物]"},{url:"178.gif",alt:"[抱抱]"},{url:"179.gif",alt:"[拇指]"},{url:"180.gif",alt:"[贬低]"},{url:"181.gif",alt:"[握手]"},{url:"182.gif",alt:"[剪刀手]"},{url:"183.gif",alt:"[抱拳]"},{url:"184.gif",alt:"[勾引]"},{url:"185.gif",alt:"[拳头]"},{url:"186.gif",alt:"[小拇指]"},{url:"187.gif",alt:"[拇指八]"},{url:"188.gif",alt:"[食指]"},{url:"189.gif",alt:"[ok]"},{url:"190.gif",alt:"[情侣]"},{url:"191.gif",alt:"[爱心]"},{url:"192.gif",alt:"[蹦哒]"},{url:"193.gif",alt:"[颤抖]"},{url:"194.gif",alt:"[怄气]"},{url:"195.gif",alt:"[跳舞]"}],[{url:"196.gif",alt:"[发呆]"},{url:"197.gif",alt:"[背着]"},{url:"198.gif",alt:"[伸手]"},{url:"199.gif",alt:"[耍帅]"},{url:"200.png",alt:"[微笑]"},{url:"201.png",alt:"[生病]"},{url:"202.png",alt:"[哭泣]"},{url:"203.png",alt:"[吐舌]"},{url:"204.png",alt:"[迷糊]"},{url:"205.png",alt:"[瞪眼]"},{url:"206.png",alt:"[恐怖]"},{url:"207.png",alt:"[忧愁]"},{url:"208.png",alt:"[眨眉]"},{url:"209.png",alt:"[闭眼]"},{url:"210.png",alt:"[鄙视]"},{url:"211.png",alt:"[阴暗]"},{url:"212.png",alt:"[小鬼]"},{url:"213.png",alt:"[礼物]"},{url:"214.png",alt:"[拜佛]"},{url:"215.png",alt:"[力量]"},{url:"216.png",alt:"[金钱]"},{url:"217.png",alt:"[蛋糕]"},{url:"218.png",alt:"[彩带]"},{url:"219.png",alt:"[礼物]"}]];i.EmojiList=a;var n=[{url:"100.gif",alt:"[微笑]"},{url:"101.gif",alt:"[伤心]"},{url:"102.gif",alt:"[美女]"},{url:"103.gif",alt:"[发呆]"},{url:"104.gif",alt:"[墨镜]"},{url:"105.gif",alt:"[哭]"},{url:"106.gif",alt:"[羞]"},{url:"107.gif",alt:"[哑]"},{url:"108.gif",alt:"[睡]"},{url:"109.gif",alt:"[哭]"},{url:"110.gif",alt:"[囧]"},{url:"111.gif",alt:"[怒]"},{url:"112.gif",alt:"[调皮]"},{url:"113.gif",alt:"[笑]"},{url:"114.gif",alt:"[惊讶]"},{url:"115.gif",alt:"[难过]"},{url:"116.gif",alt:"[酷]"},{url:"117.gif",alt:"[汗]"},{url:"118.gif",alt:"[抓狂]"},{url:"119.gif",alt:"[吐]"},{url:"120.gif",alt:"[笑]"},{url:"121.gif",alt:"[快乐]"},{url:"122.gif",alt:"[奇]"},{url:"123.gif",alt:"[傲]"},{url:"124.gif",alt:"[饿]"},{url:"125.gif",alt:"[累]"},{url:"126.gif",alt:"[吓]"},{url:"127.gif",alt:"[汗]"},{url:"128.gif",alt:"[高兴]"},{url:"129.gif",alt:"[闲]"},{url:"130.gif",alt:"[努力]"},{url:"131.gif",alt:"[骂]"},{url:"132.gif",alt:"[疑问]"},{url:"133.gif",alt:"[秘密]"},{url:"134.gif",alt:"[乱]"},{url:"135.gif",alt:"[疯]"},{url:"136.gif",alt:"[哀]"},{url:"137.gif",alt:"[鬼]"},{url:"138.gif",alt:"[打击]"},{url:"139.gif",alt:"[bye]"},{url:"140.gif",alt:"[汗]"},{url:"141.gif",alt:"[抠]"},{url:"142.gif",alt:"[鼓掌]"},{url:"143.gif",alt:"[糟糕]"},{url:"144.gif",alt:"[恶搞]"},{url:"145.gif",alt:"[什么]"},{url:"146.gif",alt:"[什么]"},{url:"147.gif",alt:"[累]"},{url:"148.gif",alt:"[看]"},{url:"149.gif",alt:"[难过]"},{url:"150.gif",alt:"[难过]"},{url:"151.gif",alt:"[坏]"},{url:"152.gif",alt:"[亲]"},{url:"153.gif",alt:"[吓]"},{url:"154.gif",alt:"[可怜]"},{url:"155.gif",alt:"[刀]"},{url:"156.gif",alt:"[水果]"},{url:"157.gif",alt:"[酒]"},{url:"158.gif",alt:"[篮球]"},{url:"159.gif",alt:"[乒乓]"},{url:"160.gif",alt:"[咖啡]"},{url:"161.gif",alt:"[美食]"},{url:"162.gif",alt:"[动物]"},{url:"163.gif",alt:"[鲜花]"},{url:"164.gif",alt:"[枯]"},{url:"165.gif",alt:"[唇]"},{url:"166.gif",alt:"[爱]"},{url:"167.gif",alt:"[分手]"},{url:"168.gif",alt:"[生日]"},{url:"169.gif",alt:"[电]"},{url:"170.gif",alt:"[炸弹]"},{url:"171.gif",alt:"[刀子]"},{url:"172.gif",alt:"[足球]"},{url:"173.gif",alt:"[瓢虫]"},{url:"174.gif",alt:"[翔]"},{url:"175.gif",alt:"[月亮]"},{url:"176.gif",alt:"[太阳]"},{url:"177.gif",alt:"[礼物]"},{url:"178.gif",alt:"[抱抱]"},{url:"179.gif",alt:"[拇指]"},{url:"180.gif",alt:"[贬低]"},{url:"181.gif",alt:"[握手]"},{url:"182.gif",alt:"[剪刀手]"},{url:"183.gif",alt:"[抱拳]"},{url:"184.gif",alt:"[勾引]"},{url:"185.gif",alt:"[拳头]"},{url:"186.gif",alt:"[小拇指]"},{url:"187.gif",alt:"[拇指八]"},{url:"188.gif",alt:"[食指]"},{url:"189.gif",alt:"[ok]"},{url:"190.gif",alt:"[情侣]"},{url:"191.gif",alt:"[爱心]"},{url:"192.gif",alt:"[蹦哒]"},{url:"193.gif",alt:"[颤抖]"},{url:"194.gif",alt:"[怄气]"},{url:"195.gif",alt:"[跳舞]"},{url:"196.gif",alt:"[发呆]"},{url:"197.gif",alt:"[背着]"},{url:"198.gif",alt:"[伸手]"},{url:"199.gif",alt:"[耍帅]"},{url:"200.png",alt:"[微笑]"},{url:"201.png",alt:"[生病]"},{url:"202.png",alt:"[哭泣]"},{url:"203.png",alt:"[吐舌]"},{url:"204.png",alt:"[迷糊]"},{url:"205.png",alt:"[瞪眼]"},{url:"206.png",alt:"[恐怖]"},{url:"207.png",alt:"[忧愁]"},{url:"208.png",alt:"[眨眉]"},{url:"209.png",alt:"[闭眼]"},{url:"210.png",alt:"[鄙视]"},{url:"211.png",alt:"[阴暗]"},{url:"212.png",alt:"[小鬼]"},{url:"213.png",alt:"[礼物]"},{url:"214.png",alt:"[拜佛]"},{url:"215.png",alt:"[力量]"},{url:"216.png",alt:"[金钱]"},{url:"217.png",alt:"[蛋糕]"},{url:"218.png",alt:"[彩带]"},{url:"219.png",alt:"[礼物]"}];i.EmojiAll=n;var r={EmojiList:a,EmojiAll:n};i.default=r},"7c3c":function(t,i,e){"use strict";var a=e("288e");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=a(e("05e8")),r={data:function(){return{record_length:1e-4,record:0,imgUrl:"../../static/logo.png",imgWidth:200,imgHeight:200}},props:{row:{type:Object,default:function(){}}},created:function(){"img"===this.row.message_type&&this.imgInit()},computed:{user_info:function(){return this.$store.state.chat.user_info},isSelf:function(){return this.user_info.id==this.row.send_id?"right":"left"},messageText:function(){var t=[];return"text"===this.row.message_type&&"string"===typeof this.row.message&&(t=(0,n.default)(this.row.message)),t},percent:function(){return this.record/this.record_length*100},recordCeil:function(){return Math.ceil(this.record)},voiceLength:function(){return this.record<.1?this.row.record_length:this.recordCeil},isAudioPlay:function(){return this.$store.state.chat.isAudioPlay}},methods:{playAudio:function(t){var i=this;if(!this.isAudioPlay){this.$store.commit("audioPlay",!0);var e=t.record_length,a=t.url,n=this;this.record_length=e;var r=uni.createInnerAudioContext();r.autoplay=!0,r.src=a,r.onTimeUpdate(function(){n.record=r.currentTime,r.duration<60&&(n.record_length=r.duration)}),r.onEnded(function(t){r.destroy(),i.record_length=.01,i.record=.01,i.$store.commit("audioPlay",!1)})}},imgInit:function(){var t=this.row,i=t.width,e=t.height,a=t.url,n=this;a&&(this.imgUrl=a,i&&e?n.setImgSize(i,e):uni.getImageInfo({src:a,success:function(t){var i=t.width,e=t.height;n.setImgSize(i,e)}}))},setImgSize:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;t>200?(this.imgWidth=200,this.imgHeight=i/t*200):(this.imgWidth=t,this.imgHeight=i)}}};i.default=r},"7ca3":function(t,i,e){"use strict";var a=e("29f0"),n=e.n(a);n.a},"847b":function(t,i,e){var a=e("bcd8");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=e("4f06").default;n("710b6fec",a,!0,{sourceMap:!1,shadowMode:!1})},9143:function(t,i,e){"use strict";var a=e("288e");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e("a481");var n=a(e("e6ea")),r=a(e("f4a9")),l=a(e("43c9")),s=a(e("1ce8")),u=a(e("1955")),o=e("7b5e"),c={components:{chatMessage:n.default,uniPopup:r.default},mixins:[s.default,l.default,u.default],data:function(){return{scrollAnimation:!1,scrollTop:0,scrollToView:"",emojiList:o.EmojiList,popupLayerClass:"",hideMore:!0,hideEmoji:!0,showPopup:!1,popupMessage:"",textMsg:"",cursor:0,receive_id:0}},computed:{receive_user_info:function(){return this.$store.state.chat.private_user_info},privateMassagerList:function(){if(!this.receive_id)return[];var t="chat_new_"+this.receive_id,i=this.$store.state.chat.privateMassagerObject[t]||[];return i.map(function(t){var i=t.time;if("string"===typeof i||!t)return t;var e=new Date(i);return t.time=e.getMonth()+1+"月"+e.getDate()+"日"+e.getHours()+":"+e.getMinutes(),t})}},watch:{privateMassagerList:function(){var t=this;this.$nextTick(function(){t.scrollToView="message"+(t.privateMassagerList.length-1)})}},onUnload:function(){},onShow:function(){this.initOnShow()},onBackPress:function(){this.$store.commit("cancelMassagerTips",this.receive_id)},methods:{initOnShow:function(){0===this.receive_id&&(this.receive_id=this.$store.state.chat.private_id),this.receive_id?(this.receive_user_info.nickname&&uni.setNavigationBarTitle({title:"与"+this.receive_user_info.nickname+"的对话"}),this.$store.commit("cancelMassagerTips",this.receive_id),this.getPrivateChat()):uni.reLaunch({url:"/pages/chat/contact"})},openDrawer:function(){this.popupLayerClass="showLayer",this.hideMore=!0},hideDrawer:function(){var t=this;this.popupLayerClass="",setTimeout(function(){t.hideMore=!0,t.hideEmoji=!0},150)},loadHistory:function(){},switchVoice:function(){this.isVoice=!this.isVoice},showMore:function(){this.hideMore=!1,this.popupLayerClass="showLayer"},textareaBlurEvent:function(t){this.textMsg=t.detail.value,this.cursor=t.detail.cursor||0},chooseImage:function(){this.sendImage("album")},camera:function(){this.sendImage("camera")},handRedEnvelopes:function(){this.hideDrawer(),console.log("handRedEnvelopes")},chooseEmoji:function(){this.hideMore=!0,this.hideEmoji?(this.hideEmoji=!1,this.popupLayerClass="showLayer"):this.hideDrawer()},addEmoji:function(t){var i,e,a=this.cursor,n=this.textMsg;0!==a?(i=n.substring(0,a),e=n.substr(a),this.textMsg=i+t.alt+e):this.textMsg=t.alt+n},sendText:function(){var t=this;if(this.hideDrawer(),""!==this.textMsg){var i=this.textMsg;setTimeout(function(){t.textMsg=""},0),i=this.replaceEmoji(i);var e={action:"sendToUid",data:{send_id:this.user_info.id,receive_id:this.receive_id,message_type:"text",message:i,time:(new Date).getTime()}};this.sendSocketMessage(e)}},replaceEmoji:function(t){var i=t.replace(/\[([^(\]|\[)]*)\]/g,function(t){for(var i=0;i<o.EmojiAll.length;i++){var e=o.EmojiAll[i];if(e.alt==t){var a="https://qq.wyx2013.cn/upload/emoji/",n='<img src="'+a+e.url+'">';return n}}});return'<div class="talk-emoji" >'+i+"</div>"},floatTouchClick:function(t){console.log(t)},getPrivateChat:function(){var t={action:"getPrivateChat",data:{send_id:this.user_info.id,receive_id:this.receive_id}};this.sendSocketMessage(t)}}};i.default=c},"949c":function(t,i,e){"use strict";e.r(i);var a=e("9143"),n=e.n(a);for(var r in a)"default"!==r&&function(t){e.d(i,t,function(){return a[t]})}(r);i["default"]=n.a},b5ed:function(t,i,e){"use strict";var a={"chat-message":e("e6ea").default,"fa-icon":e("e0bc").default,"uni-popup":e("f4a9").default},n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",[e("v-uni-view",{staticClass:"content",on:{touchstart:function(i){arguments[0]=i=t.$handleEvent(i),t.hideDrawer.apply(void 0,arguments)}}},[e("v-uni-scroll-view",{staticClass:"msg-list",attrs:{"scroll-y":"true","scroll-with-animation":t.scrollAnimation,"scroll-top":t.scrollTop,"scroll-into-view":t.scrollToView,"upper-threshold":"50"},on:{scrolltoupper:function(i){arguments[0]=i=t.$handleEvent(i),t.loadHistory.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"loading"},[e("v-uni-view",{staticClass:"spinner"},[e("v-uni-view",{staticClass:"rect1"}),e("v-uni-view",{staticClass:"rect2"}),e("v-uni-view",{staticClass:"rect3"}),e("v-uni-view",{staticClass:"rect4"}),e("v-uni-view",{staticClass:"rect5"})],1)],1),t._l(t.privateMassagerList,function(i,a){return e("v-uni-view",{key:a,staticClass:"row",attrs:{id:"message"+a}},[i.send_id===t.user_info.id?e("v-uni-view",{staticClass:"my"},[e("v-uni-view",{staticClass:"left"},[e("chat-message",{attrs:{row:i}})],1),e("v-uni-view",{staticClass:"right"},[e("v-uni-image",{staticClass:"figureurl",attrs:{src:t.user_info.figureurl}})],1)],1):e("v-uni-view",{staticClass:"other"},[e("v-uni-view",{staticClass:"left"},[e("v-uni-image",{staticClass:"figureurl",attrs:{src:t.receive_user_info.figureurl}})],1),e("v-uni-view",{staticClass:"right"},[e("v-uni-view",{staticClass:"username"},[e("v-uni-view",{staticClass:"name"},[t._v(t._s(t.receive_user_info.nickname))]),e("v-uni-view",{staticClass:"time"},[t._v(t._s(i.time))])],1),e("chat-message",{attrs:{row:i}})],1)],1)],1)})],2)],1),e("v-uni-view",{staticClass:"input-box",class:t.popupLayerClass},[e("v-uni-view",{staticClass:"more",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.showMore.apply(void 0,arguments)}}},[e("fa-icon",{attrs:{type:"plus",size:"24"}})],1),e("v-uni-view",{staticClass:"textbox"},[e("v-uni-view",{staticClass:"voice-mode",class:[t.isVoice?"":"hidden",t.recording?"recording":""],on:{touchstart:function(i){arguments[0]=i=t.$handleEvent(i),t.voiceBegin.apply(void 0,arguments)},touchmove:function(i){i.stopPropagation(),i.preventDefault(),arguments[0]=i=t.$handleEvent(i),t.voiceIng.apply(void 0,arguments)},touchend:function(i){arguments[0]=i=t.$handleEvent(i),t.voiceEnd.apply(void 0,arguments)},touchcancel:function(i){arguments[0]=i=t.$handleEvent(i),t.voiceCancel.apply(void 0,arguments)}}},[t._v(t._s(t.voiceTis))]),e("v-uni-view",{staticClass:"text-mode",class:t.isVoice?"hidden":""},[e("v-uni-view",{staticClass:"box"},[e("v-uni-textarea",{attrs:{"auto-height":"true",value:t.textMsg,cursor:t.cursor},on:{blur:function(i){arguments[0]=i=t.$handleEvent(i),t.textareaBlurEvent.apply(void 0,arguments)}}})],1),e("v-uni-view",{staticClass:"em",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.chooseEmoji.apply(void 0,arguments)}}},[e("fa-icon",{attrs:{type:"smile-o ",size:"28"}})],1)],1)],1),e("v-uni-view",{staticClass:"send",class:t.isVoice?"hidden":"",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.sendText.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"btn"},[t._v("发送")])],1)],1),e("v-uni-view",{staticClass:"record",class:t.recording?"":"hidden"},[e("v-uni-view",{staticClass:"ing",class:t.willStop?"hidden":""},[e("v-uni-view",{staticClass:"icon luyin2"})],1),e("v-uni-view",{staticClass:"cancel",class:t.willStop?"":"hidden"},[e("v-uni-view",{staticClass:"icon chehui"})],1),e("v-uni-view",{staticClass:"tis",class:t.willStop?"change":""},[e("v-uni-view",{staticStyle:{"text-align":"center"}},[e("v-uni-view",[t._v(t._s(t.recordTis))]),e("v-uni-view",[t._v("已录音"+t._s(t.recordLength)+"秒")])],1)],1),e("v-uni-view",{staticClass:"tis",class:t.willStop?"change":""})],1),e("v-uni-view",{staticClass:"popup-layer",class:t.popupLayerClass},[e("v-uni-swiper",{staticClass:"emoji-swiper",class:{hidden:t.hideEmoji},attrs:{"indicator-dots":"true",duration:"150"}},t._l(t.emojiList,function(i,a){return e("v-uni-swiper-item",{key:a},t._l(i,function(i,a){return e("v-uni-view",{key:a,on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addEmoji(i)}}},[e("v-uni-image",{attrs:{mode:"widthFix",src:"https://qq.wyx2013.cn/upload/emoji/"+i.url}})],1)}),1)}),1),e("v-uni-view",{staticClass:"more-layer",class:{hidden:t.hideMore}},[e("v-uni-view",{staticClass:"list"},[e("v-uni-view",{staticClass:"box",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.chooseImage.apply(void 0,arguments)}}},[e("fa-icon",{attrs:{type:"picture-o",size:"32"}})],1),e("v-uni-view",{staticClass:"box",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.camera.apply(void 0,arguments)}}},[e("fa-icon",{attrs:{type:"mobile",size:"36"}})],1),e("v-uni-view",{staticClass:"box",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.handRedEnvelopes.apply(void 0,arguments)}}},[e("fa-icon",{attrs:{type:"send",size:"32"}})],1)],1)],1)],1),e("uni-popup",{ref:"popup",attrs:{show:t.showPopup,type:"bottom"}},[t._v(t._s(t.popupMessage))])],1)},r=[];e.d(i,"b",function(){return n}),e.d(i,"c",function(){return r}),e.d(i,"a",function(){return a})},bcd8:function(t,i,e){i=t.exports=e("2350")(!1),i.push([t.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.page[data-v-6a743c28]{\n  /*距离顶部范围应该在118-122范围内*/padding-bottom:%?118?%}',""])},be71:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a={name:"UniPopup",props:{animation:{type:Boolean,default:!0},type:{type:String,default:"center"},custom:{type:Boolean,default:!1},maskClick:{type:Boolean,default:!0},show:{type:Boolean,default:!0}},data:function(){return{ani:"",showPopup:!1}},watch:{show:function(t){t?this.open():this.close()}},created:function(){},methods:{clear:function(){},open:function(){var t=this;this.$emit("change",{show:!0}),this.showPopup=!0,this.$nextTick(function(){setTimeout(function(){t.ani="uni-"+t.type},30)})},close:function(t){var i=this;!this.maskClick&&t||(this.$emit("change",{show:!1}),this.ani="",this.$nextTick(function(){setTimeout(function(){i.showPopup=!1},300)}))}}};i.default=a},e6ea:function(t,i,e){"use strict";e.r(i);var a=e("0188"),n=e("2276");for(var r in n)"default"!==r&&function(t){e.d(i,t,function(){return n[t]})}(r);var l,s=e("f0c5"),u=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"18150e1c",null,!1,a["a"],l);i["default"]=u.exports},eb20:function(t,i,e){"use strict";e.r(i);var a=e("be71"),n=e.n(a);for(var r in a)"default"!==r&&function(t){e.d(i,t,function(){return a[t]})}(r);i["default"]=n.a},f4a9:function(t,i,e){"use strict";e.r(i);var a=e("68d1"),n=e("eb20");for(var r in n)"default"!==r&&function(t){e.d(i,t,function(){return n[t]})}(r);e("7ca3");var l,s=e("f0c5"),u=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"a0b6e51e",null,!1,a["a"],l);i["default"]=u.exports}}]);