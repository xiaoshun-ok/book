(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-index"],{"133e":function(t,e,n){"use strict";var i=n("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("cebc")),o=i(n("795b")),u=i(n("768b")),r=n("b7c4"),s={data:function(){return{}},computed:{no_status:function(){return this.is_mp?1:0}},methods:{_adminUserLogin:function(t){var e=this;uni.request({url:r.AdminUserLogin+"?no_status="+e.no_status,method:"POST",header:{"content-type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},data:t}).then(function(t){var n=(0,u.default)(t,2),i=n[0],a=n[1];i||!a.data||a.data.code||e.saveUserInfo(a.data)})},saveUserInfo:function(t){var e=t.id,n=t.nickname,i=t.figureurl,a=t.token;this.$store.commit("setChatUserInfo",{id:e,nickname:n,figureurl:i}),this.$store.commit("setToken",a),uni.setStorage({key:"chat_user_info",data:t,complete:function(){uni.reLaunch({url:"/pages/user/index"})}})},authUserRequest:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new o.default(function(i,o){var u=e.$store.state.chat.token,r=e.$store.state.chat.user_info.id;u&&r&&uni.request({url:t,method:"POST",data:(0,a.default)({token:u,chat_user_id:r},n),header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){t.data&&i(t.data)},fail:function(t){o(t)}})})}}};e.default=s},"29f0":function(t,e,n){var i=n("502c");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("1bf3a7cc",i,!0,{sourceMap:!1,shadowMode:!1})},3380:function(t,e,n){"use strict";n.r(e);var i=n("d9bc"),a=n("8161");for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);var u,r=n("f0c5"),s=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,"ccdfa3f0",null,!1,i["a"],u);e["default"]=s.exports},"502c":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.uni-popup[data-v-a0b6e51e]{position:fixed;top:0;bottom:0;left:0;right:0;z-index:99999;overflow:hidden}.uni-popup__mask[data-v-a0b6e51e]{position:absolute;top:0;bottom:0;left:0;right:0;z-index:998;background:rgba(0,0,0,.4);opacity:0}.uni-popup__mask.ani[data-v-a0b6e51e]{-webkit-transition:all .3s;transition:all .3s}.uni-popup__mask.uni-bottom[data-v-a0b6e51e],.uni-popup__mask.uni-center[data-v-a0b6e51e],.uni-popup__mask.uni-top[data-v-a0b6e51e]{opacity:1}.uni-popup__wrapper[data-v-a0b6e51e]{position:absolute;z-index:999;box-sizing:border-box}.uni-popup__wrapper.ani[data-v-a0b6e51e]{-webkit-transition:all .3s;transition:all .3s}.uni-popup__wrapper.top[data-v-a0b6e51e]{top:0;left:0;width:100%;-webkit-transform:translateY(-100%);transform:translateY(-100%)}.uni-popup__wrapper.bottom[data-v-a0b6e51e]{bottom:0;left:0;width:100%;-webkit-transform:translateY(100%);transform:translateY(100%)}.uni-popup__wrapper.center[data-v-a0b6e51e]{width:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-transform:scale(1.2);transform:scale(1.2);opacity:0}.uni-popup__wrapper-box[data-v-a0b6e51e]{position:relative;box-sizing:border-box}.uni-popup__wrapper.uni-custom .uni-popup__wrapper-box[data-v-a0b6e51e]{padding:%?30?%;background:#fff}.uni-popup__wrapper.uni-custom.center .uni-popup__wrapper-box[data-v-a0b6e51e]{position:relative;max-width:80%;max-height:80%;overflow-y:scroll}.uni-popup__wrapper.uni-custom.bottom .uni-popup__wrapper-box[data-v-a0b6e51e],.uni-popup__wrapper.uni-custom.top .uni-popup__wrapper-box[data-v-a0b6e51e]{width:100%;max-height:500px;overflow-y:scroll}.uni-popup__wrapper.uni-bottom[data-v-a0b6e51e],.uni-popup__wrapper.uni-top[data-v-a0b6e51e]{-webkit-transform:translateY(0);transform:translateY(0)}.uni-popup__wrapper.uni-center[data-v-a0b6e51e]{-webkit-transform:scale(1);transform:scale(1);opacity:1}',""])},"68d1":function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.showPopup?n("v-uni-view",{staticClass:"uni-popup"},[n("v-uni-view",{staticClass:"uni-popup__mask",class:[t.ani,t.animation?"ani":"",t.custom?"":"uni-custom"],on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.close(!0)}}}),n("v-uni-view",{staticClass:"uni-popup__wrapper",class:[t.type,t.ani,t.animation?"ani":"",t.custom?"":"uni-custom"],on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.close(!0)}}},[n("v-uni-view",{staticClass:"uni-popup__wrapper-box",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.clear.apply(void 0,arguments)}}},[t._t("default")],2)],1)],1):t._e()},o=[];n.d(e,"b",function(){return a}),n.d(e,"c",function(){return o}),n.d(e,"a",function(){return i})},"768b":function(t,e,n){"use strict";n.r(e);var i=n("a745"),a=n.n(i);function o(t){if(a()(t))return t}var u=n("5d73"),r=n.n(u);function s(t,e){var n=[],i=!0,a=!1,o=void 0;try{for(var u,s=r()(t);!(i=(u=s.next()).done);i=!0)if(n.push(u.value),e&&n.length===e)break}catch(c){a=!0,o=c}finally{try{i||null==s["return"]||s["return"]()}finally{if(a)throw o}}return n}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function p(t,e){return o(t)||s(t,e)||c()}n.d(e,"default",function(){return p})},"7ca3":function(t,e,n){"use strict";var i=n("29f0"),a=n.n(i);a.a},8161:function(t,e,n){"use strict";n.r(e);var i=n("e59c"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);e["default"]=a.a},be71:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"UniPopup",props:{animation:{type:Boolean,default:!0},type:{type:String,default:"center"},custom:{type:Boolean,default:!1},maskClick:{type:Boolean,default:!0},show:{type:Boolean,default:!0}},data:function(){return{ani:"",showPopup:!1}},watch:{show:function(t){t?this.open():this.close()}},created:function(){},methods:{clear:function(){},open:function(){var t=this;this.$emit("change",{show:!0}),this.showPopup=!0,this.$nextTick(function(){setTimeout(function(){t.ani="uni-"+t.type},30)})},close:function(t){var e=this;!this.maskClick&&t||(this.$emit("change",{show:!1}),this.ani="",this.$nextTick(function(){setTimeout(function(){e.showPopup=!1},300)}))}}};e.default=i},d9bc:function(t,e,n){"use strict";var i={"fa-icon":n("e0bc").default,"uni-popup":n("f4a9").default},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"loginBg"},[n("v-uni-view",{staticClass:"h30"}),n("v-uni-view",{staticClass:"flex-center "},[n("v-uni-view",{staticClass:"flex-center",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goHome()}}},[n("v-uni-image",{staticClass:"wh-60",staticStyle:{margin:"0 auto"},attrs:{src:"/static/logo.png"}})],1)],1),n("v-uni-view",{staticClass:"loginBox",attrs:{autocomplete:"off",id:"login-form"}},[n("v-uni-form",{on:{submit:function(e){arguments[0]=e=t.$handleEvent(e),t.formSubmit.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"flexIcon flex"},[n("v-uni-view",{staticClass:" flexIcon-icon"},[n("fa-icon",{attrs:{type:"user",size:"18",color:"#FFFFFF"}})],1),n("v-uni-input",{staticClass:"flexIcon-text",attrs:{type:"text","placeholder-class":"cl-white",name:"username",placeholder:"请输帐号"}})],1),n("v-uni-view",{staticClass:"flexIcon flex"},[n("v-uni-view",{staticClass:"flexIcon-icon"},[n("fa-icon",{attrs:{type:"briefcase",size:"18",color:"#FFFFFF"}})],1),n("v-uni-input",{staticClass:"flexIcon-text",attrs:{type:"password","placeholder-class":"cl-white",name:"password",placeholder:"请输入登录密码"}})],1),n("v-uni-button",{staticClass:"btn-row-submit",attrs:{type:"primary",formType:"submit"}},[t._v("登陆")])],1),n("v-uni-view",{staticClass:"flex mgb-20"},[n("v-uni-navigator",{staticClass:"cl-white pointer flex-1",attrs:{url:"/pages/user/register"}},[t._v("注册")]),n("v-uni-navigator",{staticClass:"cl-white pointer",attrs:{url:"/pages/login/findpwd"}},[t._v("忘记密码")])],1),n("v-uni-view",{staticClass:"flex flex-center mgb-20"},[n("v-uni-button",{staticClass:"icon-weixin",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.test.apply(void 0,arguments)}}},[n("fa-icon",{attrs:{type:"weixin",size:"24",color:"#FFFFFF"}}),t._v("H5使用测试号登录")],1)],1)],1),n("uni-popup",{ref:"popup",attrs:{show:t.showPopup,type:"center"}},[t._v(t._s(t.popupMessage))])],1)},o=[];n.d(e,"b",function(){return a}),n.d(e,"c",function(){return o}),n.d(e,"a",function(){return i})},e59c:function(t,e,n){"use strict";var i=n("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("795b")),o=i(n("f4a9")),u=n("b7c4"),r=i(n("133e")),s={components:{uniPopup:o.default},mixins:[r.default],data:function(){return{showPopup:!1,popupMessage:"",retryCount:0}},onShow:function(){},methods:{goHome:function(){uni.redirectTo({url:"/pages/index/index"})},wxLogin:function(t){var e=this;if(!t.detail.userInfo||!t.detail.encryptedData)return this.showPopup=!0,this.popupMessage="末授权登录",void setTimeout(function(){return e.showPopup=!1},2e3);this.retryCount=0,this.jwtWeixin(t.detail)},jwtWeixin:function(t){var e=this;uni.login({provider:"weixin"}).then(function(t){return new a.default(function(e,n){!t[0]&&t[1].code&&e(t[1].code)})}).then(function(e){return new a.default(function(n,i){t?n({code:e,detail:t}):uni.getUserInfo({provider:"weixin",success:function(t){return n({code:e,detail:t})}})})}).then(function(t){return new a.default(function(n,i){uni.request({url:u.MpWeiXinAuth,method:"POST",data:{code:t.code,iv:t.detail.iv,encrypted_data:t.detail.encryptedData},success:function(t){t.data.id?e.saveUserInfo(t.data):i()}})})}).catch(function(){e.retryCount++,e.retryCount<3?setTimeout(function(){return e.jwtWeixin()},1e3):(e.popupMessage="网络连接错误，请重试",setTimeout(function(){return e.showPopup=!1},1e3),e.showPopup=!0)})},formSubmit:function(t){var e=t.detail.value;this._adminUserLogin(e)},test:function(){uni.setStorage({key:"chat_user_info",data:{nickname:"dfsd",figureurl:"https://qq.wyx2013.cn/static/index/img/headdefault.png",code:0,id:"18",token:"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpYXQiOjE1Njg1MTM3MjQsIm5iZiI6MTU2ODUxMzcyNCwiZXhwIjoxNTY5MTE4NTI0LCJkYXRhIjp7ImFkbWluX3VzZXJfaWQiOiIxMSJ9fQ.vOhjEoR7OvKm34ywGszOgxUNa08lye75AVUhOh63jdM",exp:1569118524},success:function(){uni.redirectTo({url:"/pages/index/index"})}})}}};e.default=s},eb20:function(t,e,n){"use strict";n.r(e);var i=n("be71"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);e["default"]=a.a},f4a9:function(t,e,n){"use strict";n.r(e);var i=n("68d1"),a=n("eb20");for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);n("7ca3");var u,r=n("f0c5"),s=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,"a0b6e51e",null,!1,i["a"],u);e["default"]=s.exports}}]);