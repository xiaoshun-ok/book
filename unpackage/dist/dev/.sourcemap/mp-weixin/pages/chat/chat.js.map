{"version":3,"sources":["webpack:///C:/Users/Administrator/Documents/HBuilderProjects/book/main.js","webpack:///C:/Users/Administrator/Documents/HBuilderProjects/book/pages/chat/chat.vue?84b4","webpack:///C:/Users/Administrator/Documents/HBuilderProjects/book/pages/chat/chat.vue?f2a8","webpack:///C:/Users/Administrator/Documents/HBuilderProjects/book/pages/chat/chat.vue?520f","webpack:///C:/Users/Administrator/Documents/HBuilderProjects/book/pages/chat/chat.vue?a9f9","webpack:///C:/Users/Administrator/Documents/HBuilderProjects/book/pages/chat/chat.vue","webpack:///C:/Users/Administrator/Documents/HBuilderProjects/book/pages/chat/chat.vue?b960","webpack:///C:/Users/Administrator/Documents/HBuilderProjects/book/pages/chat/chat.vue?a024"],"names":["createPage","Page","components","chatMessage","uniPopup","mixins","ChatInit","ChatSend","ChatVoice","data","scrollAnimation","scrollTop","scrollToView","emojiList","EmojiList","popupLayerClass","hideMore","hideEmoji","showPopup","popupMessage","textMsg","cursor","receive_id","computed","receive_user_info","$store","state","chat","private_user_info","privateMassagerList","key","list","privateMassagerObject","map","item","time","date","Date","getMonth","getDate","getHours","getMinutes","watch","that","$nextTick","length","onUnload","onShow","initOnShow","onBackPress","commit","methods","private_id","uni","reLaunch","url","nickname","setNavigationBarTitle","title","getPrivateChat","openDrawer","hideDrawer","setTimeout","loadHistory","switchVoice","isVoice","showMore","textareaBlurEvent","event","detail","value","chooseImage","sendImage","camera","handRedEnvelopes","console","log","chooseEmoji","addEmoji","em","text","start","end","alt","substring","substr","sendText","replaceEmoji","tpl","action","send_id","user_info","id","message_type","message","getTime","sendSocketMessage","str","replacedStr","replace","i","EmojiAll","EM","onlinePath","imgstr","floatTouchClick","e"],"mappings":"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","file":"pages/chat/chat.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'\nimport Page from './pages/chat/chat.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./chat.vue?vue&type=template&id=0e15352b&\"\nvar renderjs\nimport script from \"./chat.vue?vue&type=script&lang=js&\"\nexport * from \"./chat.vue?vue&type=script&lang=js&\"\nimport style0 from \"./chat.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('0e15352b')) {\n      api.createRecord('0e15352b', component.options)\n    } else {\n      api.reload('0e15352b', component.options)\n    }\n    module.hot.accept(\"./chat.vue?vue&type=template&id=0e15352b&\", function () {\n      api.rerender('0e15352b', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Documents/HBuilderProjects/book/pages/chat/chat.vue\"\nexport default component.exports","export * from \"-!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=template&id=0e15352b&\"","var components = {\n  \"chat-message\": () =>\n    import(/* webpackChunkName: \"components/chat-message/chat-message\" */ \"@/components/chat-message/chat-message.vue\"),\n  \"fa-icon\": () =>\n    import(/* webpackChunkName: \"components/fa-icon/fa-icon\" */ \"@/components/fa-icon/fa-icon.vue\"),\n  \"uni-popup\": () =>\n    import(/* webpackChunkName: \"components/uni-popup/uni-popup\" */ \"@/components/uni-popup/uni-popup.vue\")\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport chatMessage from '@/components/chat-message/chat-message.vue'\nimport uniPopup from \"@/components/uni-popup/uni-popup.vue\" \nimport ChatSend from '@/common/mixins/chat/chat_send.js'\nimport ChatInit from  '@/common/mixins/chat/chat_init.js'\nimport ChatVoice from '@/common/mixins/chat/chat_voice.js'\nimport { EmojiList,EmojiAll } from '@/common/emoji.js'  \nexport default {\n\tcomponents:{\n\t\tchatMessage,uniPopup,\n\t},\n\tmixins:[ChatInit,ChatSend,ChatVoice],\n\tdata() {\n\t\treturn {\n\t\t\t// 滚动\n\t\t\tscrollAnimation:false,//滑动动画开关\n\t\t\tscrollTop:0,//竖向滚动条位置\n\t\t\tscrollToView:'',//滚动到元素位置\n\t\t\t\n\t\t\t// 表情包 自己上传图床，我的图床不定期会删除，100K/秒的最大速度，请放过。。。。。\n\t\t\temojiList:EmojiList,\n\t\t\t\n\t\t\t//弹出抽屉\n\t\t\tpopupLayerClass:'',//打开抽屉的类\n\t\t\thideMore:true,//隐藏更多控制\n\t\t\thideEmoji:true,//隐藏表情\n\t\t\t\n\t\t\t//弹框数据\n\t\t\tshowPopup:false,//是否弹出\n\t\t\tpopupMessage:'',//消息提示\n\t\t\t\n\t\t\t// 聊天输入框相关\n\t\t\ttextMsg:'',//输入文本\n\t\t\tcursor:0,//输入框中光标位置\n\t\t\t\n\t\t\t/* 以下是聊天对象 */\n\t\t\treceive_id:0,//私聊对象\n\t\t}\n\t},\n\t\n\tcomputed:{\n\t\t//对话用户信息\n\t\treceive_user_info(){\n\t\t\treturn this.$store.state.chat.private_user_info\n\t\t},\n\t\t//私聊列表\n\t\tprivateMassagerList(){\n\t\t\tif(!this.receive_id) return []\n\t\t\tlet key='chat_new_'+this.receive_id\n\t\t\tlet list=this.$store.state.chat.privateMassagerObject[key]||[]\n\t\t\treturn  list.map(item=>{\n\t\t\t\tlet time= item.time\n\t\t\t\tif(typeof time ==='string'||!item ){\n\t\t\t\t\treturn item\n\t\t\t\t}\n\t\t\t\tlet date=new Date(time)\n\t\t\t\titem.time=(date.getMonth()+1)+\"月\"+  date.getDate()+\"日\"+date.getHours()+\":\"+date.getMinutes()\n\t\t\t\treturn item\n\t\t\t}) \n\t\t}\n\t},\n\twatch:{\n\t\t'privateMassagerList':function(){\n\t\t\tlet that=this\n\t\t\tthis.$nextTick(function(){\n\t\t\t\tthat.scrollToView=\"message\"+(that.privateMassagerList.length-1)\n\t\t\t})\n\t\t},\n\t},\n\tonUnload(){},\n\tonShow(){\n\t\tthis.initOnShow()\n\t},\n\tonBackPress(){\n\t\tthis.$store.commit('cancelMassagerTips',this.receive_id)\n\t},\n\tmethods: {\n\t\tinitOnShow(){\n\t\t\tif(this.receive_id===0){\n\t\t\t\tthis.receive_id=this.$store.state.chat.private_id\n\t\t\t}\n\t\t\tif(!this.receive_id){\n\t\t\t\tuni.reLaunch({url:\"/pages/chat/contact\"});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(this.receive_user_info.nickname){\n\t\t\t\tuni.setNavigationBarTitle({\n\t\t\t\t    title: \"与\"+this.receive_user_info.nickname+\"的对话\"\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.$store.commit('cancelMassagerTips',this.receive_id)\n\t\t\tthis.getPrivateChat()\n\t\t},\n\t\t// 打开抽屉\n\t\topenDrawer(){\n\t\t\tthis.popupLayerClass = 'showLayer';\n\t\t\tthis.hideMore=true\n\t\t},\n\t\t// 隐藏抽屉\n\t\thideDrawer(){\n\t\t\tthis.popupLayerClass = '';\n\t\t\tsetTimeout(()=>{\n\t\t\t\tthis.hideMore = true;\n\t\t\t\tthis.hideEmoji = true;\n\t\t\t},150);\n\t\t},\n\t\t//  触发滑动到顶部(加载历史信息记录)\n\t\tloadHistory(){},\n\t\t//  切换语音/文字输入\n\t\tswitchVoice(){\n\t\t\tthis.isVoice=!this.isVoice;\n\t\t},\n\t\t// 输入框边界上显示更多\n\t\tshowMore(){ \n\t\t\tthis.hideMore=false\n\t\t\tthis.popupLayerClass = 'showLayer';\n\t\t },\n\t\t//输入框失去焦点\n\t\ttextareaBlurEvent(event){\n\t\t\tthis.textMsg =event.detail.value\n\t\t\tthis.cursor= event.detail.cursor||0;\n\t\t},\n\t\t//选择图片\n\t\tchooseImage(){\n\t\t\tthis.sendImage('album')//见chat_send.js\n\t\t},\n\t\t// 拍照\n\t\tcamera(){\n\t\t\tthis.sendImage('camera')//见chat_send.js\n\t\t},\n\t\t// 红包\n\t\thandRedEnvelopes(){\n\t\t\tthis.hideDrawer()\n\t\t\tconsole.log('handRedEnvelopes')\n\t\t},\n\t\t// 选择表情\n\t\tchooseEmoji(){\n\t\t\tthis.hideMore = true;\n\t\t\tif(this.hideEmoji){\n\t\t\t\tthis.hideEmoji = false;\n\t\t\t\tthis.popupLayerClass = 'showLayer';\n\t\t\t}else{\n\t\t\t\tthis.hideDrawer();\n\t\t\t}\n\t\t},\n\t\t//添加表情\n\t\taddEmoji(em){\n\t\t\tlet cursor =this.cursor,text=this.textMsg,start,end\n\t\t\tif(cursor === 0){\n\t\t\t\tthis.textMsg = em.alt +text;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tstart=text.substring(0,cursor)\n\t\t\tend=text.substr(cursor)\n\t\t\tthis.textMsg=start+em.alt+end;\n\t\t},\n\t\t\n\t\t//  发送信息\n\t\tsendText(){\n\t\t\tthis.hideDrawer()\n\t\t\tif(this.textMsg==='')return\n\t\t\tlet text=this.textMsg\n\t\t\tsetTimeout(() => { this.textMsg = '' }, 0)\n\t\t\ttext = this.replaceEmoji(text);\n\t\t\tlet tpl={\n\t\t\t\taction:\"sendToUid\",\n\t\t\t\tdata:{\n\t\t\t\t\tsend_id:this.user_info.id,\n\t\t\t\t\treceive_id:this.receive_id,\n\t\t\t\t\tmessage_type:'text',\n\t\t\t\t\tmessage:text,\n\t\t\t\t\ttime:(new Date() ).getTime()\n\t\t\t\t},\n\t\t\t};\n\t\t\t/* if(this.user_info.id != this.receive_id){\n\t\t\t\tthis.$store.commit('receiveChatPrivate',tpl.data)\n\t\t\t} */\n\t\t\tthis.sendSocketMessage(tpl)\n\t\t},\n\t\t//替换表情符号为图片 微信开发者工具会出现所有表情在最前面的情况\n\t\treplaceEmoji(str){\n\t\t\tlet replacedStr = str.replace(/\\[([^(\\]|\\[)]*)\\]/g,(item)=>{\t\t\t\t\t\n\t\t\t\tfor (let i=0;i<EmojiAll.length;i++) {\n\t\t\t\t\tlet EM = EmojiAll[i];\n\t\t\t\t\tif(EM.alt==item){\n\t\t\t\t\t\t// 一定要修改为你自己的图床。\n\t\t\t\t\t\tlet onlinePath = 'https://qq.wyx2013.cn/upload/emoji/'\n\t\t\t\t\t\tlet imgstr = '<img src=\"'+onlinePath+EM.url+'\">';\n\t\t\t\t\t\treturn imgstr;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn '<div class=\"talk-emoji\" >'+replacedStr+'</div>';\n\t\t},\n\t\t// 侧边栏\n\t\tfloatTouchClick(e){console.log(e)},\n\t\t//取得聊天记录\n\t\tgetPrivateChat(){\n\t\t\tlet tpl={\n\t\t\t\taction:\"getPrivateChat\",\n\t\t\t\tdata:{\n\t\t\t\t\tsend_id:this.user_info.id,\n\t\t\t\t\treceive_id:this.receive_id,\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis.sendSocketMessage(tpl)\n\t\t},\n\t}\n}\n","import mod from \"-!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}