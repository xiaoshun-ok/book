{"version":3,"sources":["webpack:///C:/Users/Administrator/Documents/HBuilderProjects/book/main.js","webpack:///C:/Users/Administrator/Documents/HBuilderProjects/book/pages/login/index.vue?a545","webpack:///C:/Users/Administrator/Documents/HBuilderProjects/book/pages/login/index.vue?902d","webpack:///C:/Users/Administrator/Documents/HBuilderProjects/book/pages/login/index.vue?d099","webpack:///C:/Users/Administrator/Documents/HBuilderProjects/book/pages/login/index.vue?73ee","webpack:///C:/Users/Administrator/Documents/HBuilderProjects/book/pages/login/index.vue","webpack:///C:/Users/Administrator/Documents/HBuilderProjects/book/pages/login/index.vue?2432","webpack:///C:/Users/Administrator/Documents/HBuilderProjects/book/pages/login/index.vue?121e"],"names":["createPage","Page","components","uniPopup","mixins","user","data","showPopup","popupMessage","retryCount","onShow","self","methods","goHome","uni","redirectTo","url","wxLogin","e","detail","userInfo","encryptedData","setTimeout","jwtWeixin","login","provider","then","login_responser","Promise","resolve","reject","code","getUserInfo","success","infoRes","request","MpWeiXinAuth","method","iv","encrypted_data","res","id","saveUserInfo","catch","formSubmit","value","_adminUserLogin","test","setStorage","key"],"mappings":"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","file":"pages/login/index.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'\nimport Page from './pages/login/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=6557a8a8&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('6557a8a8')) {\n      api.createRecord('6557a8a8', component.options)\n    } else {\n      api.reload('6557a8a8', component.options)\n    }\n    module.hot.accept(\"./index.vue?vue&type=template&id=6557a8a8&\", function () {\n      api.rerender('6557a8a8', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Documents/HBuilderProjects/book/pages/login/index.vue\"\nexport default component.exports","export * from \"-!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=6557a8a8&\"","var components = {\n  \"fa-icon\": () =>\n    import(/* webpackChunkName: \"components/fa-icon/fa-icon\" */ \"@/components/fa-icon/fa-icon.vue\"),\n  \"uni-popup\": () =>\n    import(/* webpackChunkName: \"components/uni-popup/uni-popup\" */ \"@/components/uni-popup/uni-popup.vue\")\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport uniPopup from \"@/components/uni-popup/uni-popup.vue\" \nimport {MpWeiXinAuth, AdminUserLogin} from '@/common/config.js'\nimport user from '@/common/mixins/user.js'\nexport default {\n\tcomponents: {uniPopup},\n\tmixins:[user],\n\tdata:function(){\n\t\treturn {\n\t\t\tshowPopup:false,//是否弹出\n\t\t\tpopupMessage:'',//消息提示\n\t\t\tretryCount:0,//重试次数\n\t\t}\n\t},\n\tonShow(){\n\t\tlet self=this\n\n\t\t// uni.checkSession().then(()=>{\n\t\t// \tself.jwtWeixin()\n\t\t// })\n\n\t},\n\tmethods:{\n\t\tgoHome(){\n\t\t\tuni.redirectTo({url:'/pages/index/index'})\n\t\t},\n\t\t\n\t\twxLogin(e) {\n\t\t\tif(!e.detail.userInfo || !e.detail.encryptedData){\n\t\t\t\tthis.showPopup=true\n\t\t\t\tthis.popupMessage='末授权登录'\n\t\t\t\tsetTimeout(()=>this.showPopup=false , 2000)\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.retryCount=0\n\t\t\tthis.jwtWeixin(e.detail)\n\t\t},\n\t\t\n\t\tjwtWeixin(detail){\n\t\t\tlet self=this\n\t\t\tuni.login({\n\t\t\t\tprovider: 'weixin'\n\t\t\t}).then(login_responser=>{\n\t\t\t\treturn new Promise((resolve, reject)=>{\n\t\t\t\t\tif(!login_responser[0] && login_responser[1].code ){\n\t\t\t\t\t\tresolve(login_responser[1].code)\n\t\t\t\t\t}\n\t\t\t\t});\t\t\t\t\t\n\t\t\t}).then(code=>{\n\t\t\t\treturn new Promise((resolve, reject)=>{\n\t\t\t\t\tif(detail){\n\t\t\t\t\t\tresolve({code,detail})\n\t\t\t\t\t}else{\n\t\t\t\t\t\tuni.getUserInfo({\n\t\t\t\t\t\t\tprovider: 'weixin',\n\t\t\t\t\t\t\tsuccess: (infoRes)=>resolve({code,detail:infoRes})\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}).then(data=>{\n\t\t\t\treturn new Promise((resolve, reject)=>{\n\t\t\t\t\tuni.request({\n\t\t\t\t\t\turl: MpWeiXinAuth,\n\t\t\t\t\t\tmethod:'POST',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tcode: data.code,\n\t\t\t\t\t\t\t\tiv:data.detail.iv,\n\t\t\t\t\t\t\t\tencrypted_data:data.detail.encryptedData\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\t\tif(!res.data.id){\n\t\t\t\t\t\t\t\treject()\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tself.saveUserInfo(res.data)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\t\t\n\t\t\t\t})\n\t\t\t}).catch(()=>{\n\t\t\t\tself.retryCount++\n\t\t\t\tif(self.retryCount<3){\n\t\t\t\t\tsetTimeout(()=>self.jwtWeixin(),1000)\n\t\t\t\t}else{\n\t\t\t\t\tself.popupMessage='网络连接错误，请重试'\n\t\t\t\t\tsetTimeout(()=>self.showPopup=false , 1000)\n\t\t\t\t\tself.showPopup=true\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t\n\t\tformSubmit(e){\n\t\t\tlet data=e.detail.value\n\t\t\tthis._adminUserLogin(data)\n\t\t},\n\t\t\n\t\ttest(){\n\t\t\tuni.setStorage({\n\t\t\t\tkey:'chat_user_info',\n\t\t\t\tdata:{\"nickname\":\"dfsd\",\"figureurl\":\"https://qq.wyx2013.cn/static/index/img/headdefault.png\",\"code\":0,\"id\":\"18\",\"token\":\"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpYXQiOjE1Njg1MTM3MjQsIm5iZiI6MTU2ODUxMzcyNCwiZXhwIjoxNTY5MTE4NTI0LCJkYXRhIjp7ImFkbWluX3VzZXJfaWQiOiIxMSJ9fQ.vOhjEoR7OvKm34ywGszOgxUNa08lye75AVUhOh63jdM\",\"exp\":1569118524},\n\t\t\t\tsuccess:function(){\n\t\t\t\t\tuni.redirectTo({url:'/pages/index/index'})\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t}\n}\n","import mod from \"-!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}